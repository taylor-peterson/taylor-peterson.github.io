<!DOCTYPE html>
<html lang="en">

<!-- Current navigation heavily influenced by/derived from
     https://thinkshout.com/blog/2014/12/creating-dynamic-menus-in-jekyll/ -->

<!-- Set shared metadata and import shared dependencies -->
<head>
    <meta charset="UTF-8">
    <title>{{ site.name }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- See https://developers.google.com/speed/libraries/?csw=1#jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <!-- See https://www.bootstrapcdn.com/ -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <style type="text/css">{% include theme.css %}</style>
</head>

<body>

<!-- Primary Navigation Bar -->
<!-- Will automatically include all top-level directories and files in _pages -->
<div class="container-fluid">
    <div class="row-fluid">
        <div class="navbar navbar-inverse navbar-fixed-top navbar-static-top" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                  <span class="sr-only">Toggle navigation</span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="{{ site.baseurl }}/">{{ site.name }}</a>
              </div>
              <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                  {% for node in site.pages %}
                    {% assign node_url_parts = node.url | split: '/' %}
                    {% assign node_url_parts_size = node_url_parts | size %}
                    {% if node_url_parts_size == 2 %}
                      {% if page.url contains node.url %}
                          {% assign class_type = "current" %}
                      {% else %}
                          {% assign class_type = "active" %}
                      {% endif %}
                      <li class={{ class_type }}><a href="{{ node.url }}">{{ node.title }}</a></li>
                    {% endif %}
                  {% endfor %}
                </ul>
              </div>
        </div>
    </div>
</div>

{% assign url_parts      = page.url  | split: '/' %}
{% assign url_parts_size = url_parts | size %}
{% if url_parts_size > 0 %}
    {% assign rm             = url_parts | last %}
    {% assign base_url       = page.url  | remove: rm %}
{% endif %}

<ul>
{% if page.path contains 'index' %}
    <!-- If we've got a sub index file, we should display bread-crumbs and sub-pages. -->
    {% for node in site.pages %}
      {% assign node_url_parts = node.url | split: '/' %}
      {% assign node_url_parts_size = node_url_parts | size %}
      {% assign sub_node_url_parts_size = node_url_parts_size | minus:1 %}
      {% assign parent_size = node_url_parts_size | plus:1 %}
      {% if page.url contains node.url and url_parts_size == parent_size %}
        <li><a href='{{node.url}}'>&lt&lt {{node.title}}</a></li>
      {% elsif node.url contains page.url and url_parts_size == sub_node_url_parts_size %}
        <li><a href='{{node.url}}'>&gt&gt {{node.title}}</a></li>
      {% elsif node.url == page.url %}
        <li><a href='{{node.url}}'>== {{node.title}}</a></li>
      {% endif %}
    {% endfor %}
{%else %}
    <!-- If we've got a normal page, we should display bread-crumbs and sibling-pages. -->
    {% for node in site.pages %}
      {% if node.url contains base_url %}
        {% assign node_url_parts = node.url | split: '/' %}
        {% assign node_url_parts_size = node_url_parts | size %}
        {% if url_parts_size == node_url_parts_size %}
          <li><a href='{{node.url}}'>== {{node.title}}</a></li>
        {% elsif node.url == base_url %}
          <li><a href='{{node.url}}'>&lt&lt {{node.title}}</a></li>
        {% endif %}
      {% endif %}
    {% endfor %}
{% endif %}
</ul>

<hr>
